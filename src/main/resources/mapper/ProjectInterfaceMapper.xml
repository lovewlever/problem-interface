<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.problem.pl.model.dao.ProjectInterfaceMapper">
    <resultMap id="userResultMap" type="com.problem.pl.model.entities.TProjectInterfaceEntity">
        <id column="id" property="id" javaType="String"/>
       <result column="pi_add_timestamp" property="piAddTimestamp" javaType="java.lang.Long"/>
       <result column="pi_last_mod_timestamp" property="piLastModTimestamp" javaType="java.lang.Long"/>
       <result column="pi_name" property="piName" javaType="java.lang.String"/>
       <result column="pi_is_abandoned" property="piIsAbandoned" javaType="java.lang.String"/>
       <result column="pi_data_json" property="piDataJson" javaType="java.lang.String"/>
       <result column="pi_mod_transfer_flow" property="piModTransferFlow" javaType="java.lang.String"/>
       <result column="user_id" property="userId" javaType="java.lang.String"/>
       <result column="project_id" property="projectId" javaType="java.lang.String"/>
    </resultMap>

    <!--根据id查询接口详情-->
    <select id="queryProjectInterfaceById" parameterType="java.lang.String">
        SELECT * FROM T_PROJECT_INTERFACE WHERE id = #{interfaceId}
    </select>

    <!--查询某个项目下所有接口的数量-->
    <select id="getProjectInterfacesByProjectIdCount" parameterType="java.lang.String">
        SELECT COUNT(0) FROM T_PROJECT_INTERFACE WHERE project_id = #{projectId}
    </select>

    <!--查询某个项目下的接口列表-->
    <select id="queryProjectInterfacesByProjectId" >
        SELECT * FROM T_PROJECT_INTERFACE
        WHERE project_id = #{projectId}
        ORDER BY pi_add_timestamp DESC
        LIMIT #{startPos},#{pageSizeCount}
    </select>

    <!--插入一个接口-->
    <insert id="saveProjectInterface" parameterType="com.problem.pl.model.entities.TProjectInterfaceEntity">
        INSERT INTO T_PROJECT_INTERFACE(id, pi_add_timestamp, pi_name, pi_data_json, user_id, project_id)
        VALUES (#{id},#{piAddTimestamp},#{piName},#{piDataJson},#{userIdForAdd},#{projectId})
    </insert>

</mapper>